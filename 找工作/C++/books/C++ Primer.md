# 零、前言







# 一、C++ Primer

## 第一章 开始

### 1.1 编写一个简单的C++程序

**函数的定义，包含四部分：**

- 返回类型
- 函数名
- 形参列表
- 函数体

**运行GNU或微软编译器**

在不同操作系统和编译器系统中，运行C++编译器的命令也各不相同。最常用的编译器为GNU编译器和微软Visual Studio编译器。默认情况下，运行GNU编译器的命令是g++：

```
g++ -o prog1 prog1.cc
```

- -o：编译器参数，指定了可执行文件的文件名。
- 使用此命令会生成一个名为`prog1`或`prog1.exe`的可执行文件。在UNIX中，可执行文件没有后缀；在Windows系统中，后缀为`.exe`
- 若省略`-o prog1`参数，在UNIX系统中编译器会生成一个名为`a.out`的可执行文件，在Windows系统中则会生成一个名为`a.exe`的可执行文件。
- ==根据使用的GNU编译器版本，可能需要指定`-std=c++0x`参数来打开对C++11的支持。== 

运行微软Visual Studio 2010编译器的命令为cl：

```
C:\Users\me\Programs> cl /EHsc prog1.cpp
```

- 命令cl调用编译器
- /EHsc是编译器选项，用来打开标准异常处理。
- 微软编译器会自动生成一个可执行文件，其名字与第一个源文件名对应。在此例中，可执行文件的文件名为`prog1.exe`

### 1.2 输入输出

​		C++语言并未定义任何输入输出语句，而是包含了一个全面的标准库（standard library）来提供IO机制。

​		本书中很多示例都使用了iostream库，该库包含两个基础类型istream和ostream，分别表示输入流和输出流。**一个流就是一个字符序列**，是从IO设备读出或写入IO设备的。术语“流”（stream）想要表达的是，随着时间的推移，字符是顺序生成或消耗的。

**标准输入输出对象**

标准库定义了**4个**IO对象：

- 标准输入：为了处理输入，我们使用一个名为**cin**的istream类型的对象，这个对象也被称为**标准输入（standard input）**
- 标准输出：对于输出，我们使用一个名为**cout**的ostream类型的对象，这个对象也被称为**标准输出（standard output）**
- 标准错误：我们通常用cerr来输出警告和错误消息，因此它也被称为标准错误（standard error）。
- 而clog用来输出程序运行时的一般性信息

系统通常将程序所运行的窗口与这些对象关联起来。因此，当我们读取cin，数据会从程序正在运行的窗口读入，当我们向cout、cerr和clog写入数据时，将会写到同一个窗口。

**一个使用IO库的程序**

通过使用IO库，我们可以扩展main程序，使之能提示用户输入两个数，然后输出它们的和：

```c++
#include <iostream>
int main()
{
	std::cout << "Enter two numbers:" << std::endl;
	int v1 = 0, v2 = 0;
	std::cin >> v1 >> v2;
	std::cout << "The sum of " << v1 << " and " << v2 << " is " << v1 + v2 << std::endl;
	return 0;
}
```

- 程序的第一行 `#include <iostream>`  告诉编译器我们想要使用iostream库。尖括号中的名字指出了一个头文件(header)。每个使用标准设施的程序都必须包含相关的头文件。
- 遇到的问题：在VScode输出终端中，无法键入v1和v2的值。解决：扩展 Code Runner 的设置中，勾选`Run in Terminal`

#### 1.2.1 向流写入数据

```
std::cout << "Enter two numbers:" << std::endl;
```

等价于

```
(std::cout << "Enter two numbers:") << std::endl;
```

等价于

```
std::cout << "Enter two numbers:";
std::cout << std:endl;
```

- 第一个输出运算符给用户打印一条消息。它是一个“**字符串字面值常量**”。
- 第二个输出运算符打印endl
  - endl被称为“**操纵符**”
  - 写入endl的作用：
    - 结束当前行。
    - 将与设备关联的缓冲区中的内容刷到设备中。<!--刷新操作保证到目前为止程序所产生的所有输出都真正写入输出流中，而不是仅停留在内存中等待写入流。-->
      - ==程序员常常在调试时添加打印语句。这类语句应该保证“一直“刷新流，否则程序崩溃，输出还停留在缓冲区，导致崩溃位置的错误判断。==

#### 1.2.2 从流读取数据

**输入运算符（>>）**与输出运算符类似，它接受一个istream作为其左侧运算对象，接受一个对象作为其右侧运算对象。与输出运算符类似，输入运算符返回其左侧运算对象作为其计算结果。

```c++
std::cin >> v1 >> v2;
```

等价于

```c++
(std::cin >> v1) >> v2;
```

由于此运算符返回其左侧运算对象，因此我们我们可以将一系列输入请求合并到单一语句中，上述语句执行结果与下面两条语句的执行结果一样

```c++
std::cin >> v1;
std::cin >> v2;
```

### 1.3 注释

- 单行注释：// 注释内容
- 界定符对注释：/*  注释内容 */
  - 当注释界定符跨越多行时，最好能显示指出其内部的程序行都属于多行注释的一部分。因此在注释内的每行都以一个星号开头。

### 1.4 控制流

- while
- for
- if
